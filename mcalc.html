<!DOCTYPE html>
<html>
 <head>
 <title>CloudFront</title>
 <link rel="stylesheet" type="text/css" href="http://syddev.com/jquery.shadow/jquery.shadow/jquery.shadow.css">
 <link rel="stylesheet" type="text/css" href="public/resources/styles.css">
 <link rel="stylesheet" href="public/resources/libraries/jquery-ui-1.10.3.custom/css/dark-hive/jquery-ui-1.10.3.custom.css">
 <script src="//code.jquery.com/jquery-1.9.1.js"></script>
 <script src="http://syddev.com/jquery.shadow/jquery.shadow/jquery.shadow.js"></script>
 <script src="public/resources/libraries/jquery-ui-1.10.3.custom/js/jquery-ui-1.10.3.custom.js"></script>

<script>
//function to Validate the form
function Validate()
	{
		var isCorrect = true;
		var name=$('input[name=nameofmatrix]').val();
		var a11=$('input[name=a11]').val();
		var a22=$('input[name=a22]').val();
		var a12=$('input[name=a12]').val();
		var a21=$('input[name=a21]').val();
		var name_regex = /^[a-zA-Z0-9_]{1,8}$/;
		console.log('the name is',name);
		isCorrect = name_regex.test(name);
		console.log('after regex testing',isCorrect);
		var name_check=true;
		if(!isCorrect){
			name_check=false;}
			
		isCorrect=isCorrect&& (!isNaN(a11)) && (!(a11==null)&&(a11!=""));
		isCorrect=isCorrect&& (!isNaN(a22)) && (!(a22==null)&&(a22!=""));
		isCorrect=isCorrect&& (!isNaN(a12)) && (!(a12==null)&&(a12!=""));
		isCorrect=isCorrect&& (!isNaN(a21)) && (!(a21==null)&&(a21!=""));
		
		if(!isCorrect){
			if(!name_check)
				$('#tip').html("<p style='color:red; font-size:small'>Name should only contain letters,numbers and underscores</p>");
			else
				$('#tip').html("<p style='color:red; font-size:small'>matrix elements should only contain numbers</p>");
		}
		return isCorrect;
	}
	
	
</script>
</head>

 <body>
 <style>
  #feedback { font-size: 1.4em; }
  #selectable .ui-selecting { background: #FECA40; }
  #selectable .ui-selected { background: #F39814; color: white; }
  #selectable { list-style-type: none; margin: 0; padding: 0; width: 100px; }
  #selectable li { margin: 3px; padding: 0.4em; font-size: 1.0em; height: 12px; }
  </style>
 <script>
 $(document).ready(function(){
 		 $('#calc-container').shadow('raised');	 
 		 $('#button_define,#button_edit,#button_help').button({
 		 width:100});
 		 $('#selectable').selectable();
 		 $('#multiply').button({
 		 		 text:false,
 		 		 icons:{
 		 		 	 primary:"ui-icon-closethick"
 		 		 	}
 		 });
 		  $('#add').button({
 		 		 text:false,
 		 		 icons:{
 		 		 	 primary:"ui-icon-plusthick"
 		 		 	}
 		 });
 		  $('#equal').button({
 		 		 text:false,
 		 		 icons:{
 		 		 	 primary:"ui-icon-grip-solid-horizontal"
 		 		 	}
 		 });
		$('#dialog').dialog(
		{
			width:400,
			height:300,
			autoOpen:false
		}
		);
		$('#button_define').click(function(){
			$('#dialog').dialog('open');
			$('#tip').html("<p style='color:red; font-size:small'>All fields are mandatory</p>");
		});
		
		$('#submit_button,#cancel_button').button();
		
		$('#cancel_button').on('click',function(){
				$('#dialog').dialog('close');
		});
		
		$('#submit_button').click(function(event){
			event.preventDefault();
			var name=$('input[name=nameofmatrix]').val();
			//Validate is a function which returns a bool if validation proceeds correctly
			var isCorrect = Validate();
			if(isCorrect){
			//if validated correctly then add to list				
				$('#form1').submit();	
				//$('#dialog').dialog('close');
				$('#selectable').append("<li class='ui-widget-content'>"+name+"</li>");	
			} 
		
		});

});
</script>
<div id='calc-container' class='ui-widget ui-corner-all'>
	<!This is the button area div>
	<div id='button_area' class='ui-widget-content'>
	<button id='button_define' style='position:absolute; top: 25px; left:25px; width:100px'>Define</button>
	<button id='button_edit' style='position: absolute; top:70px; left:25px; width:100px'>Edit</button>
	<button id='button_help' style='position: absolute; top:115px; left:25px; width:100px'>Help</button>
	</div>
	<!This is the defined matrices div>
	<div id='defined_matrices' class='ui-widget-content'>
		<ul id='selectable' style="list-style-type:none; position:relative; left: 25px; top:10px">
		<li class="ui-widget-content">M1</li>
		<li class="ui-widget-content">M2</li>
		<li class="ui-widget-content">M3</li>
		<li class="ui-widget-content">M4</li>
  	</ul>
	
	</div>
	<! Display Container div starts>
	<div id='display_container' class='ui-widget-content'>
		<div id='display_pane' class='white_panes'>
		</div>
	</div>
	<! results container div starts>
	<div id='result_container' class='ui-widget-content'>
		<div id='result_pane' class='white_panes'>
		<p> result container</p>
		</div>
	</div>
	<! operations pane starts here>
	<div id='op_bar' class='ui-widget-content'>
	<button id='multiply'>X</button>
	<button id='add'>X</button>
	<button id='equal'>X</button>
	</div>
</div>
<! onsubmit='return Validate(this);'>
<div id='dialog' title='Define New Matrix'>
	<form name='form1' id='form1'  method='post'>
	<fieldset>
		<label for="Name">Name</label>
		<input type='text' name='nameofmatrix' id='Name' class='whitepanes'><br>
		<label for="a11">a11</label>
		<input type="text" name='a11' id='a11' class='whitepanes number-field'><br>
		<label for="a22">a22</label>
		<input type="text" name='a22' id='a22' class='whitepanes number-field'><br>
		<label for="a12">a12</label>
		<input type="text" name='a12' id='a12' class='whitepanes number-field'><br>
		<label for="a21">a21</label>
		<input type="text" name='a21' id='a21' class='whitepanes number-field'><br>
		<button id='submit_button'>Submit</button>
		<button id='cancel_button'>cancel</button>
	</fieldset>
	</form>
<p id='tip' style='color:red;'><i>All fields are required</i></p>
</div>
</body>
</html>
